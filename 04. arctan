//Prog 04
//11/04/13

//take user's input of (requested) double & calculate arctan to 20 decimal places 
//(using: arctan(x) = x - x3/3 + x5/5 - x7/7 + ...)

#include <iostream>
#include <iomanip>
#include <cmath>
using namespace std;

double arctan(double x, double precise);

const int COUNT = 1000;
const double PRECISION = 10e-20;

int main()
{
	double x, sum=0;
	
	cout<<"Please, enter a small decimal-number.\n";
    cin >>x;

	//sum = x - (pow(x, 3.0)/3.0) + (pow(x, 5.0)/5.0) - (pow(x, 7.0)/7.0) + (pow(x, 9.0)/9.0) - (pow(x, 11.0)/11.0) + (pow(x, 13.0)/13.0);

	cout<<"Your number is :" <<setprecision(20) <<arctan(x,PRECISION) <<endl;
}

double arctan(double x, double precise)
{
 double term;
 double sum = 0;
 int i, j;
for(i=1, j = 1; i < COUNT; i++, j = j+2)
	{
     	 
	 if (i % 2 == 0)
	  {
	    term = - pow (x, j)/j; 
		sum = sum + term;
	  }	
	  else
	  {
	    term =  pow (x, j)/j; 
		sum = sum + term; 
	  }
	  if(fabs(term) < precise){ cout<<i<<endl;;return sum;}
	}
	return sum;
}
