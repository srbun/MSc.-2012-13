/* prog33.c: This programme opens a file to use its word as the secret word to guess.[].

 * Last Modified: 07/12/2012
 ***/
/* motivation to create secret word within 3 guesses
 * no alternative**/
/* outputs as expected:
*/

/* extra libraries included*/

#include <stdio.h>
#include <stdlib.h>
#include <string.h>

int const MAX=50;

int main(void)

{
	FILE *fp;
	char secret[MAX], guess[MAX];
	int count=0, c, i, j, listword=0, tries=1;

	fp = fopen("secretwords.txt", "r");
// 	printf("%s", fp);
/*
    while(fp == NULL)
    {
        printf("There is no file to open; try elsewhere.\n");
    }
*/
//new version of getting words from file
//  fscanf(fp, "%s", secret);
    while((tries==1) && (listword<20))
    {
        j=0;
        c=getc(fp);

        while((c!=EOF) && (c!='\n'))
        {
            secret[j]=c;
            c=getc(fp);
            j++;
        }

        secret[j]='\0';
 //       printf("%s\n", secret);

        for (count = 0; (count < 3) && (strcmp(secret, guess) != 0); count++)
		//strcpy(guess, "guess");
		//count = 0;
        //while (count < 3 && strcmp(secret, guess) != 0)
        {
            printf("\nGuess the secret word within three attempts: \n\n");
            scanf ("%20s", guess);

            if (strcmp(secret, guess) == 0)
            {
            printf("\nCorrect guess - %s is the secret word.\n", guess);
            tries=1;
//            break;
            }
            else
            {
            printf("\nSorry, %s is not the secret word.\n", guess);
            tries=0;
            }
            //count++;
        }
        listword++;
    }
	printf("Ta-da!\n");
    fclose(fp);
	return 0;
}
