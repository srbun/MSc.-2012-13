//Prog 08
//19/03/2013

//compare a text file (based on C prog.34)

#include <iostream>
#include <fstream>
using namespace std;
//create args to open from cmd line
int main(int argc, char *argv[])
{
//declare 2 files -to read / input streams
fstream inputfile1;
fstream inputfile2;
int i;
char a, b;
//error-check cmd-line input
	if (argc < 3)
    {
      cerr <<"Usage: filecopy <infile> <outfile>." <<endl;
      return -1;
    }
//open files to be read / read only
	inputfile1.open(argv[1], ios::in);
	inputfile2.open(argv[2], ios::in);
//error-check file names
	if (inputfile1.fail())
    {
      cerr <<"Cannot open the input1 file." <<endl;
      return -1;
    }

	else if (inputfile2.fail())
    {
      cerr <<"Cannot open the input2 file." <<endl;
      return -1;
    }
//if neither file missing -get file content (array)
  a = '\0', b = '\0';
  while (!inputfile1.eof() && !inputfile2.eof() && a == b)
    {
      a = inputfile1.get();
      b = inputfile2.get();
    }
//can not print without loop -don't bother
//	cout<<inputfile1(argv[1]) <<endl;
//	cout<<inputfile2(argv[2]) <<endl;

  if (a != b)
    cout<<"The two files differ." <<endl;
  else
    cout<<"The two files match." <<endl;

//close the streams
inputfile1.close();
inputfile2.close();

return 0;
}

//Original C-prog. #34
/*
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
//2 arguments = file info
int main(int argc, char *argv[])
{
//open 1 files
	FILE *fp1, *fp2;
	//char input[40], output[40]; } replaced by args
	char ca, cb;

//	printf("Enter first filename:\n");
//	fgets(fp1, 40, stdin);

//	printf("Enter second filename:\n");
//	fgets(fp2, 40, stdin);

	fp1 = fopen( argv[1], "r"); /* open for reading
	fp2 = fopen( argv[2], "r"); /* open for reading

	if ( fp1 == NULL ) /* check does file exist etc
	{
		printf("Cannot open %s for reading. \n", argv[1] );
		exit(1); /* terminate program
	}
		else if ( fp2 == NULL )
		{
			printf("Cannot open %s for reading \n", argv[2] );
			exit(1); /* terminate program
		}
		else	/* both files opened successfully
		{
			ca = getc( fp1 ) ; //read c from each file
			cb = getc( fp2 ) ;

			while ( ca != EOF && cb != EOF && ca == cb )
			{
				ca = getc( fp1 ) ;
				cb = getc( fp2 ) ;
			}

			if ( ca == cb )
				printf("Files are identical. \n");

			else if ( ca != cb )
				printf("Files differ. \n" );

		fclose ( fp1 );
		fclose ( fp2 );
		}
	return 0;
}
*/
